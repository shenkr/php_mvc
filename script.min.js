$('.done').click( function() {

    if(!$(this).hasClass('disabled'))
    {
        var id = $(this).attr('data-id');
        $.post(document.location.origin + "/tasks/edit/" + id, { action: 'status' }, function(data) {
            console.log(data);
        });

        console.log($(this).hasClass('btn-success'));
        if($(this).hasClass('btn-success'))
        {
            $(this).html("not done");
            $(this).removeClass('btn-success');
            $(this).addClass('btn-secondary');
        }
        else
        {
            $(this).html("done");
            $(this).removeClass('btn-secondary');
            $(this).addClass('btn-success');
        }
    }
});

$('.description').click( function() {

    var id = $(this).attr('data-id');
    var description = $('.text-' + id).val();

    console.log(description, id);

    $.post(document.location.origin + "/tasks/edit/" + id, { action: 'description', data: description }, function(data) {
        console.log(data);
    });
        
});

$('#username').change(function() {
    $('.username-preview').html($(this).val());
});

$('#email').change(function() {
    $('.email-preview').html($(this).val());
});

$('#description').change(function() {
    $('.description-preview').html($(this).val());
});

$('#file').change(function() {
    previewFile(this, $('.file-preview')[0]);
});

function previewFile(input, preview) {
  var reader  = new FileReader();
  
  reader.readAsDataURL(file.files[0]);

  reader.onloadend = function () {
    preview.src = reader.result;
  }
}